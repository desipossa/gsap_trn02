<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/step01.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>

    <!-- <script src="./js/step01.js" defer></script> -->
</head>

<body>

    <section id="intoro" class="sec">
        intro
    </section>

    <section id="h_scroll" class="sec">
        <div class="page">
            <div class="inner">
                <h3>Lorem ipsum dolor sit.</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit, rerum.</p>
                <figure>
                    <img src="./images/v.png" alt="">
                </figure>
            </div>
        </div>
        <div class="page">
            <div class="inner">
                <h3>Lorem ipsum dolor sit.</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit, rerum.</p>
                <figure>
                    <img src="./images/v.png" alt="">
                </figure>
            </div>
        </div>
        <div class="page">
            <div class="inner">
                <h3>Lorem ipsum dolor sit.</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit, rerum.</p>
                <figure>
                    <img src="./images/v.png" alt="">
                </figure>
            </div>
        </div>
        <div class="page">
            <div class="inner">
                <h3>Lorem ipsum dolor sit.</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit, rerum.</p>
                <figure>
                    <img src="./images/v.png" alt="">
                </figure>
            </div>
        </div>
        <div class="page">
            <div class="inner">
                <h3>Lorem ipsum dolor sit.</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit, rerum.</p>
                <figure>
                    <img src="./images/v.png" alt="">
                </figure>
            </div>
        </div>
    </section>

    <footer class="sec">
        footer
    </footer>
    <script>
        const pages = gsap.utils.toArray('.page');
        // 1. 기준이 되는 아이템에 이름을 뿥여줌
        const container = gsap.to(pages, {
            xPercent: -100 * (pages.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: '#h_scroll',
                end: '+=5000', // 스크롤량을 늘여줌.
                scrub: 0,
                pin: true,
                //snap: 1 / (pages.length - 1),//scrub: 0일 경우 작동하지 않음
            }
        });

        // 2. 각각의 아ㅌ이템을 불러옴.
        const eachItm = gsap.utils.toArray('.page .inner');

        eachItm.forEach(itm => {
            gsap.from(itm, {
                y: 400,
                autoAlpha: 0,
                scrollTrigger: {
                    trigger: itm,
                    end: '+=1000', // 스크롤량을 늘여줌.
                    //scrub: 0,
                    containerAnimation: container,
                    markers: true,
                }
            })
        });

    </script>
</body>

</html>